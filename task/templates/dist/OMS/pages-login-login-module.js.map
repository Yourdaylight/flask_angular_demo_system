{"version":3,"sources":["./src/app/pages/login/login.component.ts","./src/app/pages/login/login.component.html","./src/app/pages/login/login.module.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ApiService } from 'src/app/services/api.service';\nimport { StorageService } from 'src/app/services/storage.service';\nimport { NavigateService } from 'src/app/services/navigate.service';\nimport { NzModalService } from 'ng-zorro-antd/modal';\n\nimport { en_US, zh_CN, NzI18nService } from 'ng-zorro-antd/i18n';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.less']\n})\nexport class LoginComponent implements OnInit {\n  constructor(\n    public translateService: TranslateService,\n    private fb: FormBuilder,\n    private apiService: ApiService,\n    private storageService: StorageService,\n    private navigateService: NavigateService,\n    private nzi18n: NzI18nService,\n    private $message: NzMessageService,\n    private storage: StorageService\n  ) {\n    this.readonly = true;\n  }\n  static BG_ID = '#bgLogin';\n  langFlag: boolean;\n  readonly: boolean;\n  validateForm: FormGroup;\n  lang: any;\n\n  ngOnInit(): void {\n    this.validateForm = this.fb.group({\n      username: [null, [Validators.required]],\n      password: [null, [Validators.required]]\n    });\n  }\n \n\n  changeLang(langType: string) {\n    this.translateService.use(langType);\n    this.storage.setItem('lang', langType);\n    if (langType == 'en') {\n      this.langFlag = true;\n      this.nzi18n.setLocale(en_US);\n      this.storage.setItem('nzLang','en_US');\n    } else {\n      this.langFlag = false;\n      this.nzi18n.setLocale(zh_CN);\n      this.storage.setItem('nzLang','zh_CN');\n    }\n  }\n  submitForm() {\n    this.validateForm.markAllAsTouched();\n    if (!this.validateForm.valid) {return;}\n    let loginModel = Object.assign(this.validateForm.value, {});\n    this.apiService.post('login', loginModel).subscribe((res: any) => {\n      const {code,msg,data} = res;\n      if (code === 0 && data) { \n        this.$message.success('登录成功');\n        this.storageService.setItem('token', data?.token);\n        this.storageService.setItem('role',data?.role);\n        setTimeout(() => {\n          this.navigateService.navigate('layout');\n        }, 200);\n      }else {\n        this.$message.error(msg);\n      }\n\n    });\n  }\n  toReg(){\n    this.navigateService.navigate('register');\n  }\n}\n","<div class=\"login-wrap\">\n  <canvas id=\"bgLogin\"></canvas>\n  <div class=\"seprate-icon-box\">\n    <a class=\"seprate-icon\" (click)=\"changeLang('en')\" [ngClass]=\"{'active': langFlag}\" title=\"en\">En</a>\n    <a class=\"seprate-icon\" (click)=\"changeLang('zh-cn')\" [ngClass]=\"{'active': !langFlag}\" title=\"zn_ch\">Ch</a>\n  </div>\n  <div class=\"login-card\">\n    <h3>{{'学生信息管理系统' | translate}}</h3>\n    <form nz-form [formGroup]=\"validateForm\" (ngSubmit)=\"submitForm()\">\n      <nz-form-item>\n        <nz-form-control [nzErrorTip]=\"translateService.instant('SYSTEM_VALIDATE_REQUIRE_USERNAME')\">\n          <nz-input-group nzPrefixIcon=\"user\">\n            <input type=\"text\" formControlName=\"username\" nz-input placeholder=\"{{'ACCOUNT' | translate}}\" />\n          </nz-input-group>\n        </nz-form-control>\n      </nz-form-item>\n      <nz-form-item>\n        <nz-form-control [nzErrorTip]=\"translateService.instant('SYSTEM_VALIDATE_REQUIRE_PASSWORD')\">\n          <nz-input-group nzPrefixIcon=\"lock\">\n            <input formControlName=\"password\" [readonly]=\"readonly\" (click)=\"readonly = false\" nz-input type=\"password\"\n              placeholder=\"{{'PASSWORD' | translate}}\" />\n          </nz-input-group>\n        </nz-form-control>\n      </nz-form-item>\n      <nz-form-item>\n        <nz-form-control>\n          <button nz-button nzBlock class=\"theme-bgcolor\" [disabled]=\"!validateForm.valid\">{{'LOGIN' |\n            translate}}</button>\n        </nz-form-control>\n      </nz-form-item>\n      <div class=\"text-center\">\n          <a (click)=\"toReg()\">{{'注册' |translate}}</a>\n      </div>\n    </form>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoginComponent } from './login.component';\nimport { RouterModule } from '@angular/router';\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\nimport { SharedModule } from 'src/app/shared/shared.module';\n@NgModule({\n  declarations: [LoginComponent, ],\n  imports: [\n    CommonModule,\n    SharedModule,\n    NzCheckboxModule,\n    RouterModule.forChild([{\n      path: '',\n      component: LoginComponent\n  }]),\n  ]\n})\nexport class LoginModule { }\n"],"sourceRoot":"webpack:///"}
